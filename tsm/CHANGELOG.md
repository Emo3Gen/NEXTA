# Changelog

## [v0.1.1] - 2024-XX-XX

### Исправлено
- Исправлен подбор детской группы для возраста 7–11 (Dance Mix 7-11)

### Добавлено
- Добавлена память диалога (FSM на Redis) для устранения зацикливания
- Реализована машина состояний с хранением контекста диалога
- Добавлена интерпретация ответов пользователя:
  - Извлечение возраста из текста
  - Определение направления по ключевым словам
  - Определение временного интервала аренды (до/после 16:00)
  - Извлечение количества людей
  - Определение формата аренды
- Реализован расчет стоимости аренды по правилам:
  - До 16:00 до 10 чел = 900 руб/час
  - После 16:00 до 10 чел = 1300 руб/час
  - До 16:00 >10 чел = 1100 руб/час
  - После 16:00 >10 чел = 1500 руб/час
  - Оптовые цены при аренде от 8 часов
  - Проверка лимитов форматов
- Добавлена информация о предоплате (50%) и минимальном времени бронирования (12 часов)
- Расширен debug в ответах: state_before, state_after, data_collected, rule_used
- Добавлены тесты для проверки FSM (test_rent_fsm.py, test_kids_fsm.py)

### Исправлено
- Устранено зацикливание диалогов - бот теперь помнит контекст
- Бот задает один вопрос за раз, не возвращается к первому вопросу

### Изменено
- Версия продукта обновлена до v0.1.1
- Логика обработки запросов переработана с использованием FSM

## [v0.1.0] - 2024-XX-XX

### Добавлено
- Начальная версия продуктового эмулятора
- Базовые сценарии: Запись на занятие, Детские группы, Аренда зала, Вопрос о тренере
- UI с селектором сценария и кнопками быстрых действий
- Панель отладки
- DIKIDI stub с данными о направлениях, расписании и аренде
